<!DOCTYPE html>
{% load static %}

<html lang="en">
<head>
<!-- Load an icon library to show a hamburger menu (bars) on small screens -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"><!--upload modal-->


<link rel="stylesheet" type="text/css" href="{% static 'css/min.css' %}" />
<link rel="stylesheet" type="text/css" href="{% static 'css/responsiveness.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/uploadmodal.css' %}">



    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Mysite</title>

    <style>
        a:active{
            background-color:gray;
        }

    @media screen and (max-width: 470px){
    .modal-content{
        width:100%;
    }
    .modal-body{
        height:100px;
    }
 }
    </style>

</head>
<body onload="myFunction();">
  <!-- Top navbar -->
  {% include 'navbar.html' %}

  <!-- create site modal -->
  {% include 'sitemodal.html' %}

      <!-- uploadmodal -->
  {% include 'uploadmodal.html' %}

    <!-- create folder modal -->
  {% include 'create_folder.html' %}


<!--body tab-->
<div class="container-fluid" style="margin-left: 15%">
        <br />
        <br />
        <br />
        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
          <li class="nav-item">
            <a class="nav-link fas fa-folder" data-toggle="modal" data-target="#folderModal" href="#"><r>Create folder</r></a>
          </li>
          <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false"><r>Upload file</r></a>
              <div class="dropdown-menu">
                <a class="dropdown-item fas fa-folder" data-toggle="modal" data-target="#myModal" href="#"><r>Directory</r></a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item fas fa-file-text blue" href="https://docs.google.com/document/u/0/"><r>google docs</r></a>
                <a class="dropdown-item fas fa-file-excel-o blue" href="https://docs.google.com/spreadsheets/u/0/"><r>google spreadsheet</r></a>
                <a class="dropdown-item fas fa-file-powerpoint-o blue" href="#"><r>google presentation</r></a>
              </div>
            </li>
        </ul>
</div>

   <div class="sidenav" style="margin-top:10%;">
        <h4 style="font-size:18px"></h4>
      <div class="card" style="width:80%; border:0px;">
          <div class="card-body" style="padding-top:0%;">
            <a href="">Add members</a>
            <a href="">Site members</a>
            <a href="">Chats</a>
          </div>
      </div>
    </div>

    <!-- The main site -->
    <div class="main col-sm-9">
            <div class="container-fluid">

                {% for site_folder in site_folders %}
                <div class="row border" style="width:100%; height:150px;">
                    <div class="row col-9">
                        <div class="col-sm-2" height="100%" style="padding-top:5%;">
                           <img src="{% static 'images/folder.jpeg' %}" width="50px" height="50px" style="padding-top:4%;" alt="">
                        </div>
                        <div class="col-sm-6">
                            <h5 style="padding-top:10%; margin-left:0px; width:100%;">{{ site_folder.folder_name }}</h5>
                        </div>
                    </div>
                    <div class="col-3" style="padding-top:5%;">
                        <ul type="none" style="font-size:12px;">
                           <li><a href="{% url 'siteapp:deleteSite_Folder' site_folder.folder_id %}">Delete</a></li>
                           <li><a href="">Permissions</a></li>
                        </ul>
                    </div>
                </div>
                <br />
                {% endfor %}


                    {% for file in files %}

                <div class="row border" id="files" style="border:1px groove gray; width:100%; height:150px;">
                    <div class="row col-9">

                         <span class="image col-sm-2" id="image" style="padding-top:20px;">

                            <img id="id_doc" src="{% static 'images/fileicons/docs.png' %}" width="70px" height="70px" style="display:none" alt="icon">

                            <img id="id_image" src="{% static 'images/fileicons/imageicon.png' %}" width="70px" height="70px" style="display:none;" alt="icon">
                            <img id="id_html" src="{% static 'images/fileicons/htmlicon.png' %}" width="70px" height="70px" style="display:none;" alt="icon">
                            <img id="id_pdf" src="{% static 'images/fileicons/pdficon.png' %}" width="70px" height="70px" style="display:none;" alt="icon">
                            <img id="id_def" src="{% static 'images/fileicons/deficon.png' %}" width="70px" height="70px" style="display:none;" alt="icon">
                            <img id="id_aud" src="{% static 'images/fileicons/audioicon.png' %}" width="70px" height="70px" style="display:none;" alt="icon">
                         </span>
<!--                       <img src="{% static 'images/folder.jpeg' %}" width="50px" height="50px" style="padding-top:4%;" alt="">-->
<!--                       <h5 style="padding-top:10%; width:100%;">Folder name</h5>-->
                         <span class="filename col-sm-6" id="file_name" style="padding-top:8%;">
                            <h6 style="padding-left:0;">{{ file.filepath|cut:"files/" }}</h6>
                         </span>

                    </div>
                    <span class="col-3" style="padding-top:5%;">
                        <ul type="none" style="font-size:12px;">
                           <li><a href="{% url 'siteapp:deleteFile' file.file_id %}">Delete</a></li>
                           <li><a href="">Permissions</a></li>
                        </ul>
                    </span>
                </div>
                <br />
                    {% endfor %}
                <script type="text/javascript">

<!--                let items = document.getElementById('file_name');-->
<!--                //console.log(items);-->
<!--                item = Array.from(items);-->
<!--                items.forEach(function(items) {-->
<!--                    console.log(item)-->
<!--                });-->
<!--&lt;!&ndash;                    const items = document.querySelectorAll('div.filename');&ndash;&gt;-->
<!--&lt;!&ndash;                    console.log(items);&ndash;&gt;-->

<!--                    //var fs = document.getElementById('file_name').innerText;-->
<!--                    //console.log(fs)-->

                    function myFunction() {
                    var fs = document.getElementById('id_filepath').innerText;
                    console.log(fs.innerHTML)

                    var img = new RegExp(".png|.jpeg|.jpg|.jpe|.jif|.jfif|.jfi|.webp|.raw|.arw|.cr2|.nrw|.k25|.bmp|.psd|.svg|.tiff|.tif|.gif$|.svg|.svgz");
                    var doc = new RegExp(".docx|.doc|.txt|.odt$");
                    var html = new RegExp(".htm|.html|.mhtml$");
                    var pdf = new RegExp(".pdf$");
                    var audio = new RegExp(".mp3|.wav|.wma|.wv|.amr$");
                    var power = new RegExp(".ppt|.pptx|.xps|.pptm$");

                    var divs = document.getElementsByTagName("h6");
                    console.log(divs)
<!--                    for(var i = 0; i < divs.length; i++){-->
<!--                       //do something to each div like-->
<!--                       divs[i].innerHTML = "something new...";-->
<!--                    }-->

                        for (doc.test of fs) {
                            document.getElementById('id_doc').style.display = 'block';
                            document.getElementById('id_pdf').style.display = 'none';
                            document.getElementById('id_html').style.display = 'none';
                            document.getElementById('id_aud').style.display = 'none';
                            document.getElementById('id_def').style.display = 'none';
                            document.getElementById('id_image').style.display = 'none';
                            }
                        }

                </script>

                <br />
<!--                {% for file in files %}-->
<!--                <div class="row">-->
<!--                    <div class="col-sm-6">-->
<!--                        <a href="{{file.upload}}">-->
<!--                            <img src="{{ file.file_img.url }}" height="70" width="70" alt="img">-->
<!--                            {{ file.upload|cut:"uploads/files/" }}-->
<!--                        </a>-->
<!--                    </div>-->
<!--                </div>-->
<!--                {% endfor %}-->
             </div>
            {% for message in messages %}
                message
            {% endfor %}
<!--        </div>-->
    </div>


    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
<script src="{% static 'js/script.js' %}"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script> -->
</body>
</html>